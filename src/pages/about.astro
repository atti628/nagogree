---
import Layout from '../layouts/Layout.astro';
import { getAbout } from "../library/microcms";

// MicroCMSからデータを取得
const about = await getAbout();

// ページヘッダー設定
const pageInfo = {
  title: "ABOUT",
  subtitle: "団紹介",
  bgImage: "images/IMG_3947.JPG",
};
---

<Layout title={`${pageInfo.subtitle} | NagoGree`}>

  <div class="relative h-[40vh] min-h-[300px] flex items-center justify-center bg-cover bg-center" 
       style={`background-image: url('${pageInfo.bgImage}');`}>
    <div class="absolute inset-0 bg-black/40"></div>
    <div class="relative z-10 text-center text-white">
      <h1 class="text-5xl md:text-6xl font-black tracking-widest drop-shadow-[0_0_15px_rgba(255,255,255,0.8)] mb-2">
        {pageInfo.title}
      </h1>
      <p class="text-lg font-bold tracking-[0.2em] opacity-90">{pageInfo.subtitle}</p>
    </div>
  </div>

  <div class="bg-[#FDFBF7] py-20 px-4 text-black">
    <div class="max-w-4xl mx-auto space-y-24">

      <section class="animate-on-scroll opacity-0 translate-y-10 transition-all duration-1000">
        <h2 class="text-[#228B22] text-3xl font-black tracking-widest mb-8 text-center border-b-2 border-[#DDCBB4] inline-block pb-2 mx-auto table">
          INTRODUCTION
          <span class="block text-sm text-gray-500 font-normal mt-1 tracking-normal">団紹介</span>
        </h2>

        <div class="bg-white p-8 md:p-12 shadow-sm border border-[#DDCBB4] rounded-sm">
           <div class="rich-text" set:html={about.introduction} />
        </div>
      </section>

      <section class="animate-on-scroll opacity-0 translate-y-10 transition-all duration-1000">
        <h2 class="text-[#228B22] text-3xl font-black tracking-widest mb-8 text-center border-b-2 border-[#DDCBB4] inline-block pb-2 mx-auto table">
          PROFILE
          <span class="block text-sm text-gray-500 font-normal mt-1 tracking-normal">概要</span>
        </h2>

        <div class="bg-white p-8 md:p-12 shadow-sm border border-[#DDCBB4] rounded-sm">
           <div class="rich-text" set:html={about.profile} />
        </div>
      </section>

      <section class="animate-on-scroll opacity-0 translate-y-10 transition-all duration-1000">
        <h2 class="text-[#228B22] text-3xl font-black tracking-widest mb-8 text-center border-b-2 border-[#DDCBB4] inline-block pb-2 mx-auto table">
          ACTIVITY
          <span class="block text-sm text-gray-500 font-normal mt-1 tracking-normal">活動内容</span>
        </h2>

        <div class="bg-white p-8 md:p-12 shadow-sm border border-[#DDCBB4] rounded-sm">
           <div class="rich-text mb-8" set:html={about.activity} />

           <div class="text-center pt-4 border-t border-[#DDCBB4]">
             <p class="text-sm text-gray-500 mb-4">日々の活動の様子はこちら</p>
             <a href="/activity" class="inline-block border-2 border-[#228B22] text-[#228B22] font-bold py-3 px-10 hover:bg-[#228B22] hover:text-white transition-colors duration-300 tracking-widest rounded-sm">
               最近の活動はこちらから
             </a>
           </div>
        </div>
      </section>

    </div>
  </div>
</Layout>

<style is:global>
  /* rich-textの中にあるテーブルのデザイン */
  .rich-text table {
    width: 100%;
    border-collapse: collapse;
    margin: 1em 0;
  }
  
  /* 全てのセル */
  .rich-text th, 
  .rich-text td {
    border: 1px solid #DDCBB4;
    padding: 1rem;
    text-align: left;
  }

  /* 表の「1列目」を強制的に緑・太字にする設定 */
  .rich-text th,
  .rich-text tr td:first-child {
    background-color: #FDFBF7;
    color: #228B22;
    font-weight: 900;
    white-space: nowrap;
    width: 30%;
  }

  /* スマホ調整 */
  @media (max-width: 640px) {
    .rich-text th, 
    .rich-text td {
      display: block;
      width: 100%;
    }
  }

  /* 箇条書きデザイン */
  .rich-text ul {
    list-style-type: disc;
    padding-left: 1.5em;
    margin: 1em 0;
  }
  .rich-text ol {
    list-style-type: decimal;
    padding-left: 1.5em;
    margin: 1em 0;
  }
</style>