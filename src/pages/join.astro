---
import Layout from '../layouts/Layout.astro';
import { getAbout } from "../library/microcms";

// 団紹介(about)データを取得
const about = await getAbout();

const pageInfo = {
  title: "JOIN US",
  subtitle: "入団案内",
  bgImage: "images/IMG_3947.JPG",
};
---

<Layout title={`${pageInfo.subtitle} | NagoGree`}>

  <div class="relative h-[40vh] min-h-[300px] flex items-center justify-center bg-cover bg-center" 
       style={`background-image: url('${pageInfo.bgImage}');`}>
    <div class="absolute inset-0 bg-black/40"></div>
    <div class="relative z-10 text-center text-white">
      <h1 class="text-5xl md:text-6xl font-black tracking-widest drop-shadow-[0_0_15px_rgba(255,255,255,0.8)] mb-2">
        {pageInfo.title}
      </h1>
      <p class="text-lg font-bold tracking-[0.2em] opacity-90">{pageInfo.subtitle}</p>
    </div>
  </div>

  <div class="bg-[#FDFBF7] py-20 px-4 text-black">
    <div class="max-w-4xl mx-auto space-y-24">

      <section class="animate-on-scroll opacity-0 translate-y-10 transition-all duration-1000">
        <h2 class="text-[#228B22] text-3xl font-black tracking-widest mb-8 text-center border-b-2 border-[#DDCBB4] inline-block pb-2 mx-auto table">
          MESSAGE
          <span class="block text-sm text-gray-500 font-normal mt-1 tracking-normal">メッセージ</span>
        </h2>

        <div class="bg-white p-8 md:p-12 shadow-sm border border-[#DDCBB4] rounded-sm">
           <div class="rich-text text-lg leading-loose" set:html={about.message} />
        </div>
      </section>

      <section class="animate-on-scroll opacity-0 translate-y-10 transition-all duration-1000">
        <h2 class="text-[#228B22] text-3xl font-black tracking-widest mb-8 text-center border-b-2 border-[#DDCBB4] inline-block pb-2 mx-auto table">
          PROFILE
          <span class="block text-sm text-gray-500 font-normal mt-1 tracking-normal">団の概要</span>
        </h2>

        <div class="bg-white p-8 md:p-12 shadow-sm border border-[#DDCBB4] rounded-sm">
           <div class="rich-text" set:html={about.profile} />
        </div>
      </section>

      <section class="text-center animate-on-scroll opacity-0 translate-y-10 transition-all duration-1000">
        <h2 class="text-[#228B22] text-3xl font-black tracking-widest mb-8 text-center border-b-2 border-[#DDCBB4] inline-block pb-2 mx-auto table">
          CONTACT
          <span class="block text-sm text-gray-500 font-normal mt-1 tracking-normal">連絡先</span>
        </h2>

        <p class="mb-8 text-lg font-bold">
          見学・体験はいつでも大歓迎です！<br>
          まずはお気軽にご連絡ください。
        </p>
        
        <div class="flex flex-col md:flex-row justify-center gap-6">
          {about.email && (
            <a href={`mailto:${about.email}`} class="inline-block bg-[#228B22] text-white font-bold py-4 px-10 shadow-lg hover:bg-[#1a6b1a] hover:-translate-y-1 transition-all duration-300 tracking-widest rounded-sm">
              メールで連絡する
            </a>
          )}
          {about.twitter && (
            <a href={about.twitter} target="_blank" rel="noopener noreferrer" class="inline-block bg-black text-white font-bold py-4 px-10 shadow-lg hover:bg-gray-800 hover:-translate-y-1 transition-all duration-300 tracking-widest rounded-sm">
              Twitter DMで連絡する
            </a>
          )}
        </div>
      </section>

    </div>
  </div>

</Layout>

<style is:global>
  .rich-text table { width: 100%; border-collapse: collapse; margin: 1em 0; }
  .rich-text th, .rich-text td { border: 1px solid #DDCBB4; padding: 1rem; text-align: left; }
  .rich-text th, .rich-text tr td:first-child { 
    background-color: #FDFBF7; color: #228B22; font-weight: 900; white-space: nowrap; width: 30%; 
  }
  @media (max-width: 640px) {
    .rich-text th, .rich-text td { display: block; width: 100%; }
  }
</style>